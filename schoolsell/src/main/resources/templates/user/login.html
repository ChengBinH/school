<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link th:href="@{/image/favicon.ico}" rel="shortcut icon" type="image/x-icon">
    <link th:href="@{/css/bootstrap.css}" rel="stylesheet" type="text/css">
    <link th:href="@{/css/toastr.min.css}" rel="stylesheet" type="text/css">
    <title>校园外卖</title>
</head>
<style>
    #login{
        border: 1px solid #cccccc;
        border-radius: 7px;
        padding: 10px 10px;
        margin: 300px auto;
    }
    h1{
        background-color: #007bff;
        padding: 0;
        color: #ffffff;
        border-radius: 7px;
    }
</style>
<body>
<div class="container-fluid">
    <div class="row">
        <div class="col-md-4"></div>
        <div id="login" class="col-md-4 text-center">
            <h1>用户登录</h1>
            <div style="height: 50px"></div>
            <form role="form" method="post" id="form">
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="用户手机号" name="phone" id="phone"/>
                </div>
                <div class="form-group">
                    <input type="password" class="form-control" placeholder="密码" name="password" id="password"/>
                </div>
                <button type="button" id="btn-log" class="btn btn-block btn-lg btn-outline-primary">
                    登录
                </button>
            </form>
            <a class="btn" href="javascript:history.back()" style="float: right">返回</a>
            <a class="btn" href="/sell/user/index" style="float: right">主页</a>
        </div>
        <div class="col-md-4"></div>
    </div>
</div>
<script th:src="@{/js/jQuery.js}"></script>
<script th:src="@{/js/bootstrap.js}"></script>
<script th:src="@{/js/toastr.min.js}"></script>
<script th:src="@{/js/toastTemplet.js}"></script>
<script th:inline="javascript">
    var url = [[${url}]]
    $("#btn-log").click(function () {
        $.ajax({
            url:"/sell/user/login",
            type:"POST",
            dataType:"text",
            data:$("#form").serialize(),
            cache:false,
            success:function (data) {
                if (url == null) {
                    window.location.href="/sell/user/index"
                }else {
                    window.location.href = url;
                }
            },
            error:function (request) {
                $("#password").val("");
                var result = JSON.parse(request.responseText);
                toastTemplet("error",result.msg)
            }
        })
    })
</script>
</body>
</html>
